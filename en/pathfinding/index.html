<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.704c04d836308418f5f5.css">@import url(https://fonts.googleapis.com/css2?family=Forum&display=swap);
/*! bettertext.css v2.0.4 | MIT License | github.com/paulradzkov/bettertext.css */body,h1,h2,h3,h4,h5,h6{font-family:sans-serif}body,h5{line-height:1.5}b,dl:not([class]) dt:not([class]),dt,h1,h2,h3,h4,h5,h6,strong{font-weight:bolder}abbr,h6{letter-spacing:.05em}body{font-size:1em}article:not([class]),body:not([class]),section:not([class]){margin:calc(24px + 4vh) calc(10px + 4vw)}article:not([class]) article:not([class]),article:not([class]) section:not([class]),body:not([class]) article:not([class]),body:not([class]) section:not([class]),section:not([class]) article:not([class]),section:not([class]) section:not([class]){margin-left:0;margin-right:0}p{margin:0 0 1.5em;max-width:50rem}ol:not([class]):before,p:before,ul:not([class]):before{content:"";display:block;width:10em;overflow:hidden}li p:before{content:none}h1{font-size:1.625em;line-height:1.1;margin:3.23076923em 0 .92307692em}h2{font-size:1.4375em;line-height:1.2;margin:3.13043478em 0 1.04347826em}h3{font-size:1.25em;line-height:1.3;margin:3em 0 1.2em}h4{font-size:1.125em;line-height:1.4;margin:2.66666667em 0 1.33333333em}h5{font-size:1em;margin:2.25em 0 1.5em}h6{font-size:.75em;line-height:2;margin:2em 0 0;text-transform:uppercase}@media (min-width:768px){h1{font-size:2.4375em;margin-top:3.07692308em;margin-bottom:.61538462em}h2{font-size:1.9375em;margin-top:3.09677419em;margin-bottom:.77419355em}h3{font-size:1.5625em;margin-top:2.88em;margin-bottom:.96em}h4{font-size:1.25em;margin-top:2.4em;margin-bottom:1.2em}}h1:first-child,h2:first-child,h3:first-child,h4:first-child,h5:first-child,h6:first-child{margin-top:0}h1+h2{margin-top:1.2em}h2+h3{margin-top:1.3em}h3+h4{margin-top:1.4em}h4+h5{margin-top:1.5em}h5+h6{margin-top:2em}ol:not([class]),ul:not([class]){margin:0 0 1.5em;max-width:47.5rem;padding-left:0;padding-right:2.5em}blockquote>p:last-child,ol:not([class]) ol,ol:not([class]) ul,ul:not([class]) ol,ul:not([class]) ul{margin-bottom:0}ol:not([class]) li,ul:not([class]) li{transform:translateX(2.5em);animation:fixlists 1s}@keyframes fixlists{0%{text-indent:-.001em}to{text-indent:0}}img{max-width:100%;height:auto;vertical-align:bottom}p img:not(:only-child){vertical-align:baseline}figure:not([class]){margin:3em 0}figure:not([class])>p{max-width:37.5rem;font-size:.75em;margin:.5em 0 0}dl:not([class]),hr:not([class]){max-width:50rem}figcaption{max-width:37.5rem;font-size:.75em;margin:.5em 0 3em}figcaption>p{margin:.5em 0 0}blockquote,dl:not([class]),dl:not([class]) dd:not([class]){margin:0 0 1.5em}blockquote{max-width:45rem;padding:1.5em 2.5em}blockquote>cite,blockquote>footer{display:block;font-size:.75em}pre{margin:1.5em 0;white-space:pre-wrap}p code{line-break:loose;overflow-wrap:break-word}table:not([class]){margin-top:3em;margin-bottom:3em;border-collapse:separate;border-spacing:0}table:not([class]) caption{text-align:left;font-size:.75em;margin-bottom:.625em}table:not([class]) td,table:not([class]) th{padding:.5em 1em;text-align:left;vertical-align:top;border:solid rgba(0,0,0,.1);border-width:0 0 1px}table:not([class]) thead td,table:not([class]) thead th{vertical-align:bottom;border-bottom-width:2px}hr:not([class]){border:0;border-bottom:1px solid;margin:1.5em 0;opacity:.1}abbr{margin-right:-.05em}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}.lang-selector{position:fixed;top:10px;right:10px;z-index:10}.index-page nav{position:relative;left:35%;top:15%;width:-webkit-max-content;width:max-content;z-index:1}.index-page svg{position:absolute;left:35%;top:5%;z-index:0}.index-page canvas{position:absolute;left:30px;bottom:30px;z-index:0}.index-page ul{margin:0;padding:0;display:flex;flex-direction:column-reverse}.index-page li,.index-page ul{width:-webkit-max-content;width:max-content}.index-page li{list-style:decimal-leading-zero;font-size:3rem;color:#000}.index-page li a{text-decoration:none;background:#fff}.index-page li a:hover{text-decoration:underline}.index-page header{font-size:2rem;position:absolute;bottom:175px;left:30px;transform:rotate(-30deg)}.date{font-style:italic;text-align:right}.pathfinding-page article{position:absolute;z-index:1;left:50%;right:0;top:0;background:#fff;margin-top:0;margin-bottom:0;padding-top:calc(24px + 4vh);padding-bottom:calc(24px + 4vh);padding-left:2rem}.pathfinding-page header{position:relative;z-index:1;color:#fff}.pathfinding-page .pathfinding-demo{position:fixed;top:0;left:0;width:100%;height:100%;background:#000}.pathfinding-page .date{font-style:italic;text-align:right}.pathfinding-page .lang-selector{position:relative;z-index:10;top:0;right:0}.pathfinding-page .lang-selector a{color:#fff}.forest-page body{overflow-x:hidden}.forest-page article{-webkit-columns:2;column-count:2}.forest-page .tree-on-box{height:450px;position:absolute;left:-120px;bottom:-195px;z-index:-1}.forest-page p.screen{display:inline-block;width:70%;margin:0 15% 24px}.forest-page .compare{position:relative}.forest-page .compare canvas{position:absolute;top:calc(50% - 75px);left:calc(50% - 50px)}.forest-page .lead{margin:calc(-24px - 4vh) calc(-10px - 4vw) auto;height:75vmin;overflow:hidden;position:relative}.forest-page .lead .gatsby-image-wrapper{position:absolute!important;overflow:hidden;height:75vmin;bottom:0;left:0;right:0;z-index:0;-webkit-filter:brightness(.65);filter:brightness(.65)}.forest-page .lead h1{z-index:1;color:#fff;font-size:50vmin;margin:0;line-height:1.25;font-family:Forum,cursive}.forest-page .lead h1,.forest-page .lead summary{position:relative;text-align:center;font-weight:100}.forest-page .lead summary{color:wheat;width:80vmin;margin:auto;font-size:2rem}.forest-page .lang-selector a{color:#fff}@media screen and (max-width:768px){.forest-page article{-webkit-columns:1;column-count:1}}@media screen and (max-width:375px){.forest-page .lead h1{font-size:40vmin}.forest-page .lead summary{font-size:1.2rem}}footer a{display:inline-block;margin-right:1rem}.strategy-page h1{letter-spacing:5rem}.strategy-page summary{font-size:larger}.strategy-page p{font-size:x-large;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto}.strategy-page article{-webkit-columns:2;column-count:2;-webkit-column-gap:3rem;column-gap:3rem}.strategy-page #path-illustration{float:right;margin-right:-20%;transform:scale(.9) translate(-10%);shape-outside:polygon(50% 0,90% 20%,100% 60%,75% 90%,50% 75%,20% 60%,15% 20%)}.strategy-page .gif-wrapper{display:flex;justify-content:space-around;align-items:center;margin:auto}.strategy-page .code{font-size:x-small;page-break-inside:avoid}.strategy-demo{width:100%;height:80vh}.strategy-demo .hints{text-align:center;width:100%}.hljs{display:block;overflow-x:auto;padding:.5em;background:#1d1f21}.hljs::selection,.hljs span::selection{background:#373b41}.hljs::-moz-selection,.hljs span::-moz-selection{background:#373b41}.hljs{color:#c5c8c6}.hljs-name,.hljs-title{color:#f0c674}.hljs-comment,.hljs-meta,.hljs-meta .hljs-keyword{color:#707880}.hljs-deletion,.hljs-link,.hljs-literal,.hljs-number,.hljs-symbol{color:#c66}.hljs-addition,.hljs-doctag,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string{color:#b5bd68}.hljs-attribute,.hljs-code,.hljs-selector-id{color:#b294bb}.hljs-bullet,.hljs-keyword,.hljs-selector-tag,.hljs-tag{color:#81a2be}.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-variable{color:#8abeb7}.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-selector-class,.hljs-type{color:#de935f}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><meta name="generator" content="Gatsby 2.23.6"/><title data-react-helmet="true">About path finding | Истории о разработке Webgl сцен</title><meta data-react-helmet="true" name="description" content="Это истории о том, как разработывать Webgl сцены для собственного удовольстия, без претензии на экспертизу"/><meta data-react-helmet="true" property="og:title" content="About path finding"/><meta data-react-helmet="true" property="og:description" content="Это истории о том, как разработывать Webgl сцены для собственного удовольстия, без претензии на экспертизу"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@johnSamilin"/><meta data-react-helmet="true" name="twitter:title" content="About path finding"/><meta data-react-helmet="true" name="twitter:description" content="Это истории о том, как разработывать Webgl сцены для собственного удовольстия, без претензии на экспертизу"/><link rel="icon" href="/favicon-32x32.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=4a9773549091c227cd2eb82ccd9c5e3a"/><link rel="preconnect dns-prefetch" href="https://mc.yandex.ru"/><link as="script" rel="preload" href="/webpack-runtime-28ebbabe35d1f239e2c3.js"/><link as="script" rel="preload" href="/framework-357f6a8bee87bd15d980.js"/><link as="script" rel="preload" href="/app-53f5b1b75fd814613c9c.js"/><link as="script" rel="preload" href="/styles-89fd2ae28bdf06750a71.js"/><link as="script" rel="preload" href="/a61fe1925f16bdc1d97fb8a1e801f721b74519aa-7c7cb214c93d5f0fc121.js"/><link as="script" rel="preload" href="/d27d9d65b9b386233bef3942e5f3132349444b0b-a45a71449b8471e990b4.js"/><link as="script" rel="preload" href="/component---src-pages-en-pathfinding-js-c591e22076a906166ac4.js"/><link as="fetch" rel="preload" href="/page-data\en\pathfinding\page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data\app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><main class="pathfinding-page"><div class="lang-selector"><a href="/pathfinding">По-русски</a></div><header class="lead"><h1>Pathfinding</h1><summary>This is a story that tells you how you can find your path wiht a number of ways.</summary></header><iframe class="pathfinding-demo" frameBorder="0" src="/pathfinding-demo/index.html"></iframe><article><p class="letter">When I did the <a href="/forest">scene with forest</a>, I added character there (btw, I got it<!-- --> <a href="https://www.mixamo.com/#/">here</a>), I thought that he cannot just stay on the map, he must know how to move. Not just from point A to point B but with regarding obstacles. Since our beloved character is in forest, he must know how to go around trees. This is complete new exeprience for me, and perhaps game developer guys will find this text amateurish, but it was fun for me to dig into WebAssembly and A* algorithm.</p><h2>A*</h2><p>If you imagine that The Surface as a grid, then all you&#x27;re gonna do to<!-- --> <em>find tha way</em> is to search the in graph. One of the most optimal ways to do so is to use 62-years old algorithm. Each grid cell has passabilty factor (the higher it is the harder is the way). Some cells (the ones with trees) are impassable at all. The goal is to find the fastest path. We will use heuristic for that, and it will be indicating how good the decision to choose one or another direction will be.</p><p>I&#x27;m a frontender and it turns out I&#x27;m interested in web platform features, so the right start point will be to use javascript implementation. There&#x27;s a magnificent library<!-- --> <a href="http://qiao.github.io/PathFinding.js/visual/">PathFinding.js</a> <!-- -->which contains a lot of heuristics and implementation variants. For me it looks like Best First Seacrch with Octile heuristic is the most optimal. Additionaly it can reduce the way to several critical points where the turns are.<!-- --> <a href="https://github.com/johnSamilin/forest/blob/pathfinding/src/utils/pathfinding/js.ts">Link to source code</a></p><p><strong>Performance profile</strong><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:49.375%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAKABQDAREAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAABQADCf/EABcBAQEBAQAAAAAAAAAAAAAAAAQAAwL/2gAMAwEAAhADEAAAAdssgV2bPanzOSXlK//EABsQAAEEAwAAAAAAAAAAAAAAAAQAAQIUEBEy/9oACAEBAAEFAphk7pFqrJ0Nxj//xAAoEQABAgMECwAAAAAAAAAAAAABAgMABUEEERMUEBIhM1FlcoGRwdP/2gAIAQMBAT8BdcmocOXMvwiSQHE2rWSKC9Lwv2V4xjTzlni2feBm6qY7JX7XD++c6tP/xAAsEQABAQQEDwAAAAAAAAAAAAABAgADBBMFERQxEBUhIjRCU2FzgZGkssHU/9oACAECAQE/AbBR68r57Gl5rKFhzjeVEKhK6z03NiyidrHdh8TSIMXTecn06DQWiuOGPJWH/8QAJRAAAQIADwAAAAAAAAAAAAAAAQADEBMhIiMyM2KBkZKistLT/9oACAEBAAY/AqN2beiCcSG5SrUZN+KrDb1WniIf/8QAHBABAAEFAQEAAAAAAAAAAAAAAREAITFBYRBR/9oACAEBAAE/IXZn1JmlkQiUjkVMVy2nAFkU389H/9oADAMBAAIAAwAAABCraT//xAAdEQEBAAIDAAMAAAAAAAAAAAABESExAEFREHGB/9oACAEDAQE/EH2REUKININKpzMcc9KpDDsq+yYPv3iA51rg5BZl3fyba80ehgdABA8Dz5//xAAbEQEBAAMBAQEAAAAAAAAAAAABESExQQAQgf/aAAgBAgEBPxC5kmhnkAEumKTDzo5Lm4v6Lm90+ABgMdsYNCQOHYBAauqqyuVWivV+/wD/xAAcEAEBAAIDAQEAAAAAAAAAAAABESExAEFRkWH/2gAIAQEAAT8QMMnW51WUgF2BeYStmsYvYgxnvJ+ZUzqCTYHgM27Lo0HGzTUFuUJC7Z1ddcr6/XlfX68//9k=" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/46b661737fc0fce7dfa7f496608debfe/836e2/profile-pathfinding-js.jpg 480w,
/static/46b661737fc0fce7dfa7f496608debfe/b1cc5/profile-pathfinding-js.jpg 960w,
/static/46b661737fc0fce7dfa7f496608debfe/e1744/profile-pathfinding-js.jpg 1918w" sizes="(max-width: 1918px) 100vw, 1918px" /><img loading="lazy" sizes="(max-width: 1918px) 100vw, 1918px" srcset="/static/46b661737fc0fce7dfa7f496608debfe/836e2/profile-pathfinding-js.jpg 480w,
/static/46b661737fc0fce7dfa7f496608debfe/b1cc5/profile-pathfinding-js.jpg 960w,
/static/46b661737fc0fce7dfa7f496608debfe/e1744/profile-pathfinding-js.jpg 1918w" src="/static/46b661737fc0fce7dfa7f496608debfe/e1744/profile-pathfinding-js.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></p><h2>I want more power</h2><p>Javascript has one thread and if your map is big enough or tricky enough, the calculations may affect UI responsivness. The browser is busy enough by performing a bunch of rendering work in 16ms and we could possibly help him by using a web worker. Doing so will free the main thread for some more important stuff.<!-- --> <a href="https://github.com/johnSamilin/forest/blob/pathfinding/src/utils/pathfinding/threaded.ts">Link</a> <!-- -->on the same code as above but hidden inside web worker (<a href="https://github.com/johnSamilin/forest/blob/pathfinding/src/utils/pathfinding/pathfinding.worker.ts">Github</a>).</p><p><strong>Performance profile</strong><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:48.12500000000001%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAKABQDAREAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAABQAECf/EABkBAQACAwAAAAAAAAAAAAAAAAQAAQIDBf/aAAwDAQACEAMQAAAB25wFUs7VKfN0FWapJ//EABsQAAIBBQAAAAAAAAAAAAAAAAEEAwAQERQy/9oACAEBAAEFApFJsaTdBaQBXi3/xAAmEQABAgQEBwEAAAAAAAAAAAABAxEAAgQSBSFBURATFCJDkcLT/9oACAEDAQE/AV58SBel6SW4lwoFmEuVoFqrkvqXjm49vhvqq/aAaxu6enu1aVZn18m8L5LKAZC75HH/xAApEQABAgQBDQEAAAAAAAAAAAABAgQAAxEhMgUQExQVNEFCUWSRocHU/9oACAECAQE/AQyYzLOFOVqHNRpVSuJVVvTphAjZuSO78MvyxqrMWGnoLDd/kkD1DAktJBJJJQak3ONef//EACYQAAEBBAoDAAAAAAAAAAAAAAECAAMRgRATISIxM0FScZGx0tP/2gAIAQEABj8CSHajZqqpUTyQiEZBsxPTv5MLwwGz1aSPFP8A/8QAHhABAAEEAgMAAAAAAAAAAAAAAREAITFBEFGB0fD/2gAIAQEAAT8ha1SZcuLKC7IdfY+lHTIA43gnyavTvNvLn//aAAwDAQACAAMAAAAQ0/A//8QAHBEBAQACAgMAAAAAAAAAAAAAAREhMQChEEFx/9oACAEDAQE/EE85TWCgIKVSnW/F3bRIsOPdO+JCVAkdQYFMySqyVt4QYAAAADSBgPnn/8QAHhEBAQEAAgEFAAAAAAAAAAAAAREhAEEQMVFhcfD/2gAIAQIBAT8QCNOpNixsVMFaaQnPk6/vF+sOx4Dj7A9BhdKBYC2QhxGQCFFsqqq9rvn/xAAbEAEBAQEAAwEAAAAAAAAAAAABESExABBRQf/aAAgBAQABPxAubShyBSapFwR8rRwuN7Gdw0/VEeeXn4exJQgguAFgHBKCqotX2XXr36+//9k=" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/2a924a9735b2c908a4c5ed0fb92933b7/836e2/profile-pathfinding-threaded.jpg 480w,
/static/2a924a9735b2c908a4c5ed0fb92933b7/b1cc5/profile-pathfinding-threaded.jpg 960w,
/static/2a924a9735b2c908a4c5ed0fb92933b7/1bd3a/profile-pathfinding-threaded.jpg 1919w" sizes="(max-width: 1919px) 100vw, 1919px" /><img loading="lazy" sizes="(max-width: 1919px) 100vw, 1919px" srcset="/static/2a924a9735b2c908a4c5ed0fb92933b7/836e2/profile-pathfinding-threaded.jpg 480w,
/static/2a924a9735b2c908a4c5ed0fb92933b7/b1cc5/profile-pathfinding-threaded.jpg 960w,
/static/2a924a9735b2c908a4c5ed0fb92933b7/1bd3a/profile-pathfinding-threaded.jpg 1919w" src="/static/2a924a9735b2c908a4c5ed0fb92933b7/1bd3a/profile-pathfinding-threaded.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></p><h2>I said more power</h2><p>I&#x27;m sure that js version uses all the<!-- --> <a href="https://blog.sessionstack.com/how-javascript-works-inside-the-v8-engine-5-tips-on-how-to-write-optimized-code-ac089e62b12e">optimization tricks</a> <!-- -->like hidden classes and inline caching, and by using TypeScript you can be somehow sure that the parameters passed in Pathfinding.js methods always will be the same type (and it won&#x27;t cause deoptimization). But what&#x27;s more interesting for me is to move this process to WebAssembly and to enjoy <em>near-native</em> speed.</p><p>WebAssembly can be compiled from a dozen of languages including C++, Go and Rust. Since I can&#x27;t use any of those, I chose to find a ready solution and compile it for my needs. Thanks to<!-- --> <a href="https://www.aaron-powell.com/posts/2019-02-05-golang-wasm-2-writing-go/">Aaron Powell</a>&#x27;s great explanation it took me like a day. The thing is (and it mentioned in the article) that Wasm that is compiled from Go behaves as a program rather than a library, so there&#x27;s possibility to use state in it and not to initialize grid with obstacles every time you want to use it. Keeping in mind that in this particular WebGL scene wasm module will be invoked on mouse move event, this may save some resources. On the other hand, this could possibly be a problem:<ul><li>if a module throws an exception, then the thing that won&#x27;t let Go script end closes itself and thus subsequent calls will be impossible;</li><li>Go doesn&#x27;t export any functions, instead it registers them in global scope;</li><li>it can use global scope to modify DOM, which frightens me a bit.</li></ul><a href="https://github.com/johnSamilin/go-pathfinding">Go</a></p><p><strong>Performance profile</strong><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:49.16666666666667%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAKABQDAREAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAUDBgn/xAAYAQADAQEAAAAAAAAAAAAAAAAAAwQBAv/aAAwDAQACEAMQAAAB2zXBGLa9U2Oe5jSs0//EABsQAAIBBQAAAAAAAAAAAAAAAAIEAQAQEhQy/9oACAEBAAEFAjTZmdJqhUPFbi3/xAArEQABAQQFDQAAAAAAAAAAAAABAgADBBMFERIxMhAUFSEzYWVxcoGRwdP/2gAIAQMBAT8BePaWCzm+j5V4mCLta78D4DvU02nOG+Iz7MgxpSC9MPMOOWHlivdbWVVcyz3ar6vQy//EACsRAAEBBQQKAwAAAAAAAAAAAAECAAMEEiEFEzFBEBEUFSI0U3FzkaTB1P/aAAgBAgEBPwEwFnPKvXkbPnLsPszwqqnE1A15Nu2yupHfA/GwhYJHCi/KU0BVczHvK6Sn0A0Fyjjx/ZYYaP/EACYQAAEBBAoDAAAAAAAAAAAAAAECAAMSkhAREyEiMTIzQbGistP/2gAIAQEABj8CEDzCAM7E1+HLbqZXfxZMagVAX6R0kdNL6in/xAAbEAEAAgIDAAAAAAAAAAAAAAABETEQISBBUf/aAAgBAQABPyGosJa6WoxbKATsDHCNwBQyMrQe/HAH/9oADAMBAAIAAwAAABDV6T//xAAcEQEAAgIDAQAAAAAAAAAAAAABESExQQAgUWH/2gAIAQMBAT8QJLDiSSiyBgElyqzzD5qtchFYym35wqoBA6QfLKmY30o//8QAHREBAAIDAAMBAAAAAAAAAAAAARExACFBEGGBsf/aAAgBAgEBPxDiggQCjKSBJAQtAgwd5FblPB27UIGADcZZc7ZK1vWJVVVCqyrert+5R9/Xx//EABsQAQEAAwEBAQAAAAAAAAAAAAERACFBMVGR/9oACAEBAAE/EGclhJ0K2SIIIKmVm7W/QaQ8c17FqPcnqEu0TKqp1ohzE23aU9ZOvZzK/X9cr9f1z//Z" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/45646f1433f95215a7dfd5af21a6a540/836e2/profile-pathfinding-go.jpg 480w,
/static/45646f1433f95215a7dfd5af21a6a540/b1cc5/profile-pathfinding-go.jpg 960w,
/static/45646f1433f95215a7dfd5af21a6a540/097fa/profile-pathfinding-go.jpg 1920w" sizes="(max-width: 1920px) 100vw, 1920px" /><img loading="lazy" sizes="(max-width: 1920px) 100vw, 1920px" srcset="/static/45646f1433f95215a7dfd5af21a6a540/836e2/profile-pathfinding-go.jpg 480w,
/static/45646f1433f95215a7dfd5af21a6a540/b1cc5/profile-pathfinding-go.jpg 960w,
/static/45646f1433f95215a7dfd5af21a6a540/097fa/profile-pathfinding-go.jpg 1920w" src="/static/45646f1433f95215a7dfd5af21a6a540/097fa/profile-pathfinding-go.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></p><h2>More!</h2><p>Since I went so far, why not to implement A* myself using AssembyScript? I&#x27;m very excited about it&#x27;s possibilities. AssmeblyScript is more strict TypeScript version with some<!-- --> <a href="https://www.assemblyscript.org/stdlib/map.html#map">difference in basic types</a> <!-- -->(ex. Map.keys() returns an array and not an iterator). By the way, it&#x27;s always possible to convert AssembyScript to regular TypeScript pretty easy.<!-- --> <a href="https://github.com/johnSamilin/assemblyscript-pathfinding">Result</a></p><p><strong>Performance profile</strong><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:48.958333333333336%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAKABQDAREAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAUEBgn/xAAXAQADAQAAAAAAAAAAAAAAAAAAAwQB/9oADAMBAAIQAxAAAAHbVUUYS32qzptZVLA//8QAHBAAAQMFAAAAAAAAAAAAAAAABAECAwAQERIy/9oACAEBAAEFApAp1pwBuEDfqNxb/8QAKBEAAgEBBgQHAAAAAAAAAAAAARECAwAEBRIhQRATFCIkMTNRYXGT/9oACAEDAQE/Aas8TzeGNxFMsqpTrsbADLUD03O9uZjmuuGfHZevP9Pe0esIBnK75ijJQmsy7ky02nat6s/vj//EACYRAAECBAMJAAAAAAAAAAAAAAEEEQACAyEUMZEFEBU0UVJzwdT/2gAIAQIBAT8BwCCpetOsNS7zApnmOZMzpzfSOG7J7l2qP5ow6IWlFZhYOaTsLB2ptl0tCLlKHj9nf//EACQQAAECBQIHAAAAAAAAAAAAAAECEQADEhMhMVEQI0FCcZKy/9oACAEBAAY/AhbmFhvaUT5NqFNOSFEGl0y9Ww/IPWE1LDhKQWbUDPZvHr8jj//EABsQAQEAAwADAAAAAAAAAAAAAAERACExEEFx/9oACAEBAAE/IdkhSnlRoFnshkEYCjGxRq0WnB1iBQ0wHYEJGnh8OZ08v//aAAwDAQACAAMAAAAQzlA//8QAHREBAQACAQUAAAAAAAAAAAAAAREhUQAQMWGB8P/aAAgBAwEBPxArUim9lImBtGjMGM4oFGpjBJgZ0euKUNCbByu2LJdvw+Dr/8QAHBEBAQACAgMAAAAAAAAAAAAAAREhMVFhABBB/9oACAECAQE/EFTdoyhhMtAgditXc8S2l5M9dTV35isHXqANQWCtAQMlcqKu3nfvv//EABkQAQEBAQEBAAAAAAAAAAAAAAERITFBEP/aAAgBAQABPxBcuVbIVG4bWEh6K5JJThhegTRgMJX1NAmcZCiAAAggAukNZCvvX7//2Q==" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/2b14e8aaf8a898682cabf90ef258f1a6/836e2/profile-pathfinding-as.jpg 480w,
/static/2b14e8aaf8a898682cabf90ef258f1a6/b1cc5/profile-pathfinding-as.jpg 960w,
/static/2b14e8aaf8a898682cabf90ef258f1a6/097fa/profile-pathfinding-as.jpg 1920w" sizes="(max-width: 1920px) 100vw, 1920px" /><img loading="lazy" sizes="(max-width: 1920px) 100vw, 1920px" srcset="/static/2b14e8aaf8a898682cabf90ef258f1a6/836e2/profile-pathfinding-as.jpg 480w,
/static/2b14e8aaf8a898682cabf90ef258f1a6/b1cc5/profile-pathfinding-as.jpg 960w,
/static/2b14e8aaf8a898682cabf90ef258f1a6/097fa/profile-pathfinding-as.jpg 1920w" src="/static/2b14e8aaf8a898682cabf90ef258f1a6/097fa/profile-pathfinding-as.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></p><h2>What to do with all this?</h2><p>I hoped that a simple migration from browser level to WebAssembly gives me performance boost. But as you may see from performance profiler sceenshots, there&#x27;s no much difference. Sometimes Wasm works even worse when you move the pointer to fast or move the camera around the scene. FPS may be 1-2. In the end, I&#x27;d prefer JS version because it&#x27;s simpler, more stable and more convenient.</p><h3>Update</h3><p>Simple<!-- --> <a href="https://github.com/johnSamilin/assemblyscript-pathfinding/pull/1">build optimizations</a> <!-- -->may speed up WebAssembly version up to 4 times. ¯\_(ツ)_/¯</p><h3>P.S.</h3><p><br/>Yeah, I know that he doesn&#x27;t go anywhere. But he doesn&#x27;t hurry :)</p><p class="date">13 july 2020</p><footer><a href="/">Содержание</a><a href="mailto:alexandalexapps@outlook.com">Mail</a><a href="https://www.linkedin.com/in/asaltykov/">Linkedin</a><a href="https://github.com/johnSamilin">Github</a><a href="https://habr.com/ru/users/john_samilin/posts/">Habr</a></footer></article></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
  m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
  (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

  ym(72750547, "init", {
      defer: true,
      clickmap:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:true,
      trackHash:true
  });
</script><noscript><div><img src="https://mc.yandex.ru/watch/72750547" style="position:absolute;left:-9999px" alt=""/></div></noscript><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/en/pathfinding/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-53f5b1b75fd814613c9c.js"],"component---src-pages-404-js":["/component---src-pages-404-js-49a236dd939404d9a886.js"],"component---src-pages-en-index-js":["/component---src-pages-en-index-js-613f65a257ba1fe275cf.js"],"component---src-pages-en-pathfinding-js":["/component---src-pages-en-pathfinding-js-c591e22076a906166ac4.js"],"component---src-pages-en-strategy-js":["/component---src-pages-en-strategy-js-8ca56dcee2a0764b85e7.js"],"component---src-pages-forest-js":["/component---src-pages-forest-js-75ac0f9ab3d0958e9ab8.js"],"component---src-pages-index-js":["/component---src-pages-index-js-6f94c776884efd908b33.js"],"component---src-pages-pathfinding-js":["/component---src-pages-pathfinding-js-af9cd1f83c4c2626a5ff.js"],"component---src-pages-strategy-demo-js":["/component---src-pages-strategy-demo-js-17a922a860494a1f623b.js"],"component---src-pages-strategy-js":["/component---src-pages-strategy-js-e47390dd210e1d4a9c55.js"],"component---src-pages-using-typescript-tsx":["/component---src-pages-using-typescript-tsx-6e5f04c1773c3c2523a8.js"]};/*]]>*/</script><script src="/component---src-pages-en-pathfinding-js-c591e22076a906166ac4.js" async=""></script><script src="/d27d9d65b9b386233bef3942e5f3132349444b0b-a45a71449b8471e990b4.js" async=""></script><script src="/a61fe1925f16bdc1d97fb8a1e801f721b74519aa-7c7cb214c93d5f0fc121.js" async=""></script><script src="/styles-89fd2ae28bdf06750a71.js" async=""></script><script src="/app-53f5b1b75fd814613c9c.js" async=""></script><script src="/framework-357f6a8bee87bd15d980.js" async=""></script><script src="/webpack-runtime-28ebbabe35d1f239e2c3.js" async=""></script></body></html>