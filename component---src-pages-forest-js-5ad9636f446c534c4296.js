(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{Frby:function(e){e.exports=JSON.parse('{"data":{"placeholderImage":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAANABQDAREAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAABgQJ/8QAGgEAAQUBAAAAAAAAAAAAAAAABwECAwQFBv/aAAwDAQACEAMQAAABzwExJWSZ5m205Fgsl7eqmOP/xAAbEAACAgMBAAAAAAAAAAAAAAADBAECBQYUEv/aAAgBAQABBQLwLlJcBEC5BQcobKxJrZEMrcqzlP/EACQRAAICAQMEAgMAAAAAAAAAAAECAwQRBRIhABMiMTJBFFFh/9oACAEDAQE/AbzrY1XQQsgEZ0qCN2YplJfy3Ocjg43gckkj3yOtdigmvSMvprt8BhwuyCOpCm7HHlj7++tRrQtZ4tdrFaiuI8YbbSrruOVY7uMH169dV9OeXuNDcmrdphjtgMw8sjY7eUZHHx/v76hp1RRBswi407zSB5Th49rFMKy8kuVEjn0W+KLzm1qM1G3aqy4ttFO4Ez+DFOCqkDf8B4g7vQHX/8QAJBEAAgICAgICAgMAAAAAAAAAAQIDEQQSEyEAMQUyFFFhgpH/2gAIAQIBAT8BjaU5nybHaLkwsvRdmVY3xiGk2cddpPQogN0VHifkQz4cVNdSybEWQ44OQ7de43YL7JcX6A8XAne5QHHLT3X2pFjv/Iwv9fMn4CCNcvjnmjto9hH0G6XWydpLX979/wAUPMbBkrR8ydw5F2bIpnjBjZmZonKUHZGG5FkegDnZGMz48k08/E2qPy8dRsBIqahD9NyoN2RV+f/EACYQAAIBAwMEAQUAAAAAAAAAAAECAwQREhMhIgAFMUEUFSQzUYH/2gAIAQEABj8C7Qi4zadbSZmyO0i1UhWIKhF7q1MSbqSNw/XcljaPCU0kL+uK/PMahQTZM8dQtuFOI87rBw+3XSsN7XZpSDf3eQn+9URemglKiVUaS5Zd2LkAWj5ehp8f2ST1PP8ATqUSBHeNlBTAogl5CPBZk1AbJKrBVNvPIx1UVLS02sl5IxCZbyIzRNJk0i/k0wxW1gfHX//EABkQAQEBAQEBAAAAAAAAAAAAAAERIQAxQf/aAAgBAQABPyHykj8vEwQ2qRHj9RdhWOpT4nq8UB9hKoDekmQfb1VRBKjAZ4AtqMHxesQIiUQ9k2+jCnQF/AEAApMd/9oADAMBAAIAAwAAABC1dX//xAAYEQEBAQEBAAAAAAAAAAAAAAABETEAIf/aAAgBAwEBPxA9AIQHORjdAJXnNN2AuUU1IloGoJQGyB4ikoqfMJFgTggiqdUFdooVGx9+rkARjhCXgMlPrENUKISkc7//xAAaEQEBAQEAAwAAAAAAAAAAAAABESEAMUFx/9oACAECAQE/EJEs3TDwg+RjGgkS26NgBDAEQYiLqNqtlkHAAPr30rkbgsLfglvkIQFAtFxMALEaiB3emskNABUoKAtd/8QAGBABAQEBAQAAAAAAAAAAAAAAAREhADH/2gAIAQEAAT8QuRSdkO7vdRmWruJVpJvYYSPMmx+KwOT2RrGoYbCLcCRKo3MARQ4xzX2pFkbpG5224PmMbFrv/9k=","aspectRatio":1.6,"src":"/static/b0c64fef2c42484dd50c89fdafa4c209/d895d/les-krasivye-kartinki-na-rabochij-stol-2.jpg","srcSet":"/static/b0c64fef2c42484dd50c89fdafa4c209/836e2/les-krasivye-kartinki-na-rabochij-stol-2.jpg 480w,\\n/static/b0c64fef2c42484dd50c89fdafa4c209/b1cc5/les-krasivye-kartinki-na-rabochij-stol-2.jpg 960w,\\n/static/b0c64fef2c42484dd50c89fdafa4c209/d895d/les-krasivye-kartinki-na-rabochij-stol-2.jpg 1843w","sizes":"(max-width: 1843px) 100vw, 1843px"}}}}}')},HL2w:function(e,A,a){},QrXe:function(e,A,a){"use strict";a.r(A);var t=a("q1tI"),l=a.n(t),n=a("Wbzz"),E=a("fMzE"),r=a("Bl7J"),c=a("vrFN"),m=a("Frby"),Q=a("9eSz"),s=a.n(Q),B=function(e){e.src;var A=m.data;return l.a.createElement(s.a,{fluid:A.placeholderImage.childImageSharp.fluid})},i=(a("HL2w"),a("W/9C"));A.default=function(){return l.a.createElement(r.a,{className:"forest-page",path:"forest"},l.a.createElement(c.a,{title:"О процедурной генерации лесов"}),l.a.createElement("div",{className:"lead"},l.a.createElement(B,null),l.a.createElement("h1",null,"Лес"),l.a.createElement("summary",null,"Это история о том, как вырастить лес. В браузере.")),l.a.createElement("article",null,l.a.createElement("iframe",{className:"tree-on-box",frameBorder:"0",src:"/tree-on-cube/index.html"}),l.a.createElement("p",null,"Предположим, вы хотите создать игру, действие которой происходит в лесу. Или же просто игру, в которой есть лесной массив. Как это сделать? Самый дешевый способ - сгенерировать случайное распределение деревьев по заданной поверхности."),l.a.createElement("p",null,"Однажды, когда я был за городом, я много времени провел в лесу и мне не давала покоя мысль: как сымитировать его случайность? В лесу все хаотично, но при этом взаимосвязано. Тогда я провел небольше исследование и нашел отличную статью Уэсли Керра"," ",l.a.createElement(n.Link,{to:"https://www.wesley-kerr.com/forest/"},"о генерации лесов"),". Я не буду делать перевод этой статьи, однако, она довольно простая и интересная, и она точно стоит того, чтобы ознакомиться. Или, например, с этими работами по"," ",l.a.createElement(n.Link,{to:"http://pcg.wikidot.com/pcg-algorithm:forests"},"процедурной генерации растений"),". Основываясь на этой работе я сделал порт кода в javascript и вот что из этого вышло. Результат можно увидеть в"," ",l.a.createElement(n.Link,{to:"https://github.com/johnSamilin/forest/blob/develop/src/utils/ForestGenerator.ts"},"репозитории"),"."),l.a.createElement("h2",null,"Камера, мотор"),l.a.createElement("p",null,"Представим, что у нас есть уже настроенная сцена на"," ",l.a.createElement("em",null,"react-three-fiber"),": равнина, которую предстоит засеять деревьями, камера и свет."),l.a.createElement("p",null,"Как следует из статьи, работа алгоритма имитации леса зависит от параметров:",l.a.createElement("ul",null,l.a.createElement("li",null,"n",l.a.createElement("sub",null,"f")," - начальное количество деревьев."),l.a.createElement("li",null,"R",l.a.createElement("sub",null,"s")," - радиус, внутри которого падают семена."),l.a.createElement("li",null,"S",l.a.createElement("sub",null,"s")," - количество семян, которые падают в каждой итерации."),l.a.createElement("li",null,"d",l.a.createElement("sub",null,"s")," - вероятность гибели семян."),l.a.createElement("li",null,"F",l.a.createElement("sub",null,"c")," - желаемый уровень покрытия поверхности лесом.")),"Изначально разбрасываем по полю несколько деревьев (n",l.a.createElement("sub",null,"f"),"), затем повторяем этап роста столько раз, сколько потребуется для желаемого уровня покрытия. Каждый этап роста сопровождается:",l.a.createElement("ol",null,l.a.createElement("li",null,"падением семян"),l.a.createElement("li",null,"ростом деревьем"),l.a.createElement("li",null,"гибелью семян :("))),l.a.createElement("p",null,"Хорошо, алгоритм работает. И результатом его работы является матрица с числами от 1 до 3 и массив координат, на которых должны располагаться деревья. Зачем нам матрица, спросите вы. Затем, что она показывает проходимые (пусто) и непроходимые (дерево) области, а мы хотим знать"," ",l.a.createElement("del",null,"где сидит фазан")," это, чтобы использовать в алгоритме ",l.a.createElement(n.Link,{to:"/pathfinding"},"поиска пути"),". Итак, что же получилось?"),l.a.createElement("p",{className:"screen"},l.a.createElement("img",{src:"/images/trees-close.PNG"})),l.a.createElement("p",null,"Выглядит не очень. Все потому, что трехмерные объекты обладают размерами и нужно с этим считаться. Предположим, что каждая ячейка"," ",l.a.createElement("em",null,"матрицы проходимости")," представляет собой ячейку поверхности в сцене размером ",l.a.createElement("strong",null,"NxN"),". Тогда для того, чтобы получить реальные координаты дерева, нужно просто умножить их на N. Но все равно чего-то не хватает."),l.a.createElement("h2",null,"Точки опоры"),l.a.createElement("p",null,"Когда вы хотите расположить объект в трехмерной сцене в точке [0, 0, 0], где вы ожидаете его увидеть? Если это окно браузера, то, вероятно, в углу плоскости. ",l.a.createElement("em",null,"Нет"),". Центр системы координат в такой сцене совпадает с центром плоскости, и для того, чтобы правильно разместить лес по поверхности, нужно вычесть из координат каждого дерева ¼ ширины или длины плоскости."),l.a.createElement("p",null,'Теперь у нас две проблемы. Во-первых, деревья расположены так, как должны, за одним исключением. Часть из них, те, что растут густо, выстроились в ровные ряды, как будто их сажали юннаты. Во-вторых, все они одного возраста и роста. За возраст можно взять то количество циклов генерации, которое "прожило" дерево. От него может зависеть его рост и количество падающих семян (S',l.a.createElement("sub",null,"s"),"). Это не совсем то, чего ожидаешь от дикой природы, так что давайте добавим в"," ",l.a.createElement("em",null,"случайное распределение")," элемент случайности."),l.a.createElement("div",{className:"compare"},l.a.createElement("p",{className:"screen"},l.a.createElement("img",{src:"/images/trees-translated.PNG"})),l.a.createElement(E.d,{width:110,height:160,config:{options:{roughness:2}}},l.a.createElement(E.a,{points:[[50,0],[100,20],[20,100],[50,150]],stroke:"red"}),l.a.createElement(E.b,{x1:50,x2:50,y1:125,y2:150,stroke:"red"}),l.a.createElement(E.b,{x1:50,x2:30,y1:150,y2:150,stroke:"red"})),l.a.createElement("p",{className:"screen"},l.a.createElement("img",{src:"/images/trees-final.PNG"}))),l.a.createElement("p",null,"И получим вполне реалистичный лес."),l.a.createElement("p",{className:"date"},"1 июля 2020"),l.a.createElement(i.a,null)))}}}]);
//# sourceMappingURL=component---src-pages-forest-js-5ad9636f446c534c4296.js.map